=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/MaterialManagement/Transactions/PO_Error.aspx.txt ===

﻿<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="PO_Error.aspx.cs" Inherits="Module_MaterialManagement_Transactions_PO_Error" Theme="Default" Title="ERP" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
<link href="../../../Css/yui-datatable.css" rel="stylesheet" type="text/css" />
    <link href="../../../Css/StyleSheet.css" rel="stylesheet" type="text/css" />
    <script src="../../../Javascript/PopUpMsg.js" type="text/javascript"></script>
      <script src="../../../Javascript/loadingNotifier.js" type="text/javascript"></script>
    <style type="text/css">
        .style2
        {
            width: 100%;
        }
    </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cp3" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="cp1" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="cp2" Runat="Server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="MainContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
</asp:Content>
<asp:Content ID="Content7" ContentPlaceHolderID="ContentPlaceHolder3" Runat="Server">
<div>

    <table class="style2">
     <tr>
            <td align="left" class="fontcsswhite" height="20" scope="col" style="background: url(../../../images/hdbg.JPG)" valign="middle">&nbsp;<b>Insufficient Budget</b></td>
        </tr>
        <tr>
            <td align="left">
                <asp:GridView ID="GridView2" runat="server" AllowPaging="true" PageSize="15" CssClass="yui-datatable-theme" 
                    Width="70%" onpageindexchanging="GridView2_PageIndexChanging">
                    <Columns>
                                    <asp:TemplateField HeaderText="SN">
                                    <ItemTemplate><%#Container.DataItemIndex+1  %></ItemTemplate>
                                    <HeaderStyle Font-Size="10pt" />
                                    <ItemStyle HorizontalAlign="Right" VerticalAlign="Top"  Width="6%" />
                                    </asp:TemplateField>
                                    </Columns>
                </asp:GridView>
            </td>
        </tr>
        <tr>
            <td align="center">

 <asp:Button ID="btnCancel" runat="server" onclick="btnCancel_Click" 
        Text="Cancel" CssClass="redbox" />
            </td>
        </tr>
    </table>
    <br />
    <br />
</div>

</asp:Content>
<asp:Content ID="Content8" ContentPlaceHolderID="ContentPlaceHolder4" Runat="Server">
   
</asp:Content>



=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/MaterialManagement/Transactions/PO_Error.aspx.cs ===

﻿using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

public partial class Module_MaterialManagement_Transactions_PO_Error : System.Web.UI.Page
{
    string SupCode = string.Empty;    
    string PRSPR =string.Empty;
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (!string.IsNullOrEmpty(Request.QueryString["Code"]))
            {
                SupCode = Request.QueryString["Code"].ToString();
            }
            if (!string.IsNullOrEmpty(Request.QueryString["PRSPR"]))
            {
                PRSPR = Request.QueryString["PRSPR"].ToString();
            }
            if (!IsPostBack)
            {
                this.FillGrid();
            }
        }
        catch(Exception ex)
        {
        }
    }

    public void FillGrid()
    {
        GridView2.DataSource = Session["X"];
        GridView2.DataBind();
    }
    protected void btnCancel_Click(object sender, EventArgs e)
    {
        if (PRSPR == "0")
        {
            Response.Redirect("PO_PR_Items.aspx?ModId=6&SubModId=35&Code=" + SupCode + "");
        }
        else
        {
            Response.Redirect("PO_SPR_Items.aspx?ModId=6&SubModId=35&Code=" + SupCode + "");
        }
    }
    protected void GridView2_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView2.PageIndex = e.NewPageIndex;
        this.FillGrid();
    }
}
