=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/Inventory/Transactions/CustomerChallan_New_Details.aspx.txt ===

﻿<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="CustomerChallan_New_Details.aspx.cs" Inherits="Module_Inventory_Transactions_CustomerChallan_New_Details" Title="ERP" Theme="Default"  %>

<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="cc1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
 <script src="../../../Javascript/loadingNotifier.js" type="text/javascript"></script>
    <link href="../../../Css/yui-datatable.css" rel="stylesheet" type="text/css" />
    <link href="../../../Css/StyleSheet.css" rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cp3" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="cp1" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="cp2" Runat="Server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="MainContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
</asp:Content>
<asp:Content ID="Content7" ContentPlaceHolderID="ContentPlaceHolder3" Runat="Server">
<script type="text/javascript">
        function OnChanged(sender, args)
        {
            ServerUtilities.SetTabIndex(sender.get_activeTabIndex());
        }
    </script>
    
    
    
    
      <cc1:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" 
                    AutoPostBack="true"
                    Width="100%" 
        onactivetabchanged="TabContainer1_ActiveTabChanged">
                    <cc1:TabPanel runat="server" HeaderText="Customer Challan" ID="Add">                    
                        <HeaderTemplate>
                            Customer Challan
                        </HeaderTemplate>
<ContentTemplate>
                        
                    <asp:Panel ID="Panel1" ScrollBars="Auto" Height="450px" runat="server">                    
                        
                         <table align="left" width="100%" cellpadding="0" cellspacing="0" >
        <tr>
            <td    valign="top">
               
                            <table align="left" cellpadding="0" cellspacing="0" >
                               <tr><td  height="30"><asp:DropDownList ID="DrpType" runat="server" AutoPostBack="True" 
                    Height="21px" Width="100px" CssClass="box3" 
                    onselectedindexchanged="DrpType_SelectedIndexChanged"><asp:ListItem>Select</asp:ListItem><asp:ListItem Value="Category">Category</asp:ListItem><asp:ListItem Value="WOItems">WO Items</asp:ListItem></asp:DropDownList><asp:DropDownList ID="DrpCategory" runat="server" Width="200px" 
                    AutoPostBack="True" 
                    onselectedindexchanged="DrpCategory_SelectedIndexChanged" Height="21px" 
                    CssClass="box3"></asp:DropDownList><asp:DropDownList ID="DrpSearchCode" runat="server" Width="200px" 
                    CssClass="box3" AutoPostBack="True" 
                    onselectedindexchanged="DrpSearchCode_SelectedIndexChanged"><asp:ListItem Value="Select">Select</asp:ListItem><asp:ListItem Value="tblDG_Item_Master.ItemCode">Item Code</asp:ListItem><asp:ListItem Value="tblDG_Item_Master.ManfDesc">Description</asp:ListItem><asp:ListItem Value="tblDG_Item_Master.Location">Location</asp:ListItem></asp:DropDownList><asp:DropDownList ID="DropDownList3" runat="server" 
                                style="margin-bottom: 0px" Width="155px" 
                    AutoPostBack="True" CssClass="box3"></asp:DropDownList><asp:TextBox ID="txtSearchItemCode" runat="server" Width="207px" 
                    CssClass="box3"></asp:TextBox>&#160;<asp:Button ID="btnSearch" runat="server" 
            Text="Search" CssClass="redbox" onclick="btnSearch_Click"  /></td></tr>
                                <tr>
                                    <td valign="top" align="Left"  >
                                        <asp:Panel ID="Panel2" ScrollBars="Auto" Height="400px" Width="100%" runat="server">
                                       
                                            <asp:GridView ID="GridView2" runat="server" 
                    AutoGenerateColumns="False" CssClass="yui-datatable-theme" 
                    OnPageIndexChanging="GridView2_PageIndexChanging" 
                    OnRowCommand="GridView2_RowCommand" PageSize="15" Width="95%" >
            <Columns>                                        
                <asp:TemplateField 
                                        HeaderText="SN">
                                            <ItemTemplate>
                                                <%# Container.DataItemIndex+1 %>
                                            </ItemTemplate>
                                            <ItemStyle HorizontalAlign="Right"></ItemStyle>
                                        </asp:TemplateField>
                                        
                                        <asp:TemplateField ><ItemTemplate>  <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true" oncheckedchanged="CheckBox1_CheckedChanged"
                                                 />
                                                </ItemTemplate><ItemStyle HorizontalAlign="Center" /></asp:TemplateField><asp:TemplateField HeaderText="Id" Visible="False"><ItemTemplate><asp:Label ID="lblId" runat="server" Text='<%# Bind("Id") %>'></asp:Label></ItemTemplate><ItemStyle VerticalAlign="Top" /></asp:TemplateField><asp:BoundField DataField="Id" HeaderText="Id" Visible="False"><ItemStyle VerticalAlign="Top" /></asp:BoundField><asp:BoundField DataField="SubCategory" HeaderText="SubCategory" 
                        Visible="False"><ItemStyle VerticalAlign="Top" /></asp:BoundField><asp:BoundField DataField="ItemCode" HeaderText="Item Code"><ItemStyle VerticalAlign="Top" /></asp:BoundField><asp:BoundField DataField="ManfDesc" HeaderText="Description"><ItemStyle VerticalAlign="Top" Width="55%" /></asp:BoundField><asp:BoundField DataField="UOMBasic" HeaderText="UOM"><ItemStyle VerticalAlign="Top" HorizontalAlign="Center" /></asp:BoundField><asp:BoundField DataField="StockQty" HeaderText="Stock Qty"><ItemStyle HorizontalAlign="Right" /></asp:BoundField><asp:BoundField DataField="Location" HeaderText="Location"><ItemStyle VerticalAlign="Top" /></asp:BoundField>
                        
                        <asp:TemplateField  HeaderText=" Challan Qty">
                        <ItemTemplate>
                            <asp:TextBox ID="TxtQty" runat="server"></asp:TextBox>
                            
                            <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" ErrorMessage="*" ControlToValidate="TxtQty" ValidationExpression="^\d{1,15}(\.\d{0,3})?$" ValidationGroup="A"></asp:RegularExpressionValidator>
                                    <asp:RequiredFieldValidator
                                        ID="ReqChNo" runat="server" ErrorMessage="*"  ValidationGroup="A" ControlToValidate="TxtQty"></asp:RequiredFieldValidator>
                            
                            
           </ItemTemplate>
           <ItemStyle HorizontalAlign="Left" /></asp:TemplateField>
                        
                        </Columns><EmptyDataTemplate><table width="100%" class="fontcss"><tr><td align="center"><asp:Label ID="Label1" runat="server"  Text="No data to display !" Font-Size="Larger" ForeColor="maroon"> </asp:Label></td></tr></table></EmptyDataTemplate><FooterStyle Font-Bold="False" /><HeaderStyle Font-Size="9pt" />
            <PagerSettings PageButtonCount="40" />
                                            </asp:GridView>
                                       
                                        </asp:Panel>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td valign="top" align="center"  >
                                        <asp:Button ID="BtnAdd" ValidationGroup="A"  runat="server"  CssClass="redbox" 
                                            Text="Submit" onclick="BtnAdd_Click" />
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            
                                             <asp:Button ID="Btncancel"  runat="server"  CssClass="redbox" 
                                            Text="Cancel" onclick="Btncancel_Click"  />
                                        
                                    </td>
                                </tr>
                                
                            </table>
                      
                   </td>
        </tr>
        
    </table>
                        </asp:Panel></ContentTemplate></cc1:TabPanel>
                    <cc1:TabPanel ID="View" runat="server" HeaderText="Clear Challan">
                    <ContentTemplate>
                    <asp:Panel ID="Panel3"  ScrollBars="Auto" runat="server">                    
                        
                         <table width="100%" align="center" cellpadding="0" cellspacing="0" 
                             style="height: 454px">
        <tr>
            <td>
                <table width="100%" align="center" cellpadding="0" cellspacing="0">

                   

             <tr>
            <td colspan="2">
             <iframe src="" id="myframe"  runat="server"  width="100%" height="410Px" frameborder="0" >        
        </iframe> 
            </td>
             </tr>
             
             <tr>
             <td align="center">
             
             
                 <asp:Button ID="Btncancel1" runat="server" CssClass="redbox" 
                     onclick="Btncancel1_Click" Text="Cancel" />
             
             
             </td>
             </tr>
              </table>
            </td>
        </tr>
</table>
                     </asp:Panel>
                    </ContentTemplate>
                    </cc1:TabPanel>
                </cc1:TabContainer>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
 

</asp:Content>
<asp:Content ID="Content8" ContentPlaceHolderID="ContentPlaceHolder4" Runat="Server">
</asp:Content>



=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/Inventory/Transactions/CustomerChallan_New_Details.aspx.cs ===

﻿using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.SqlClient;

public partial class Module_Inventory_Transactions_CustomerChallan_New_Details : System.Web.UI.Page
{
    clsFunctions fun = new clsFunctions();
    string connStr = "";
    SqlConnection con;
    string sId = "";
    int CompId = 0;
    int FinYearId = 0;
    string CDate = "";
    string CTime = "";
    string custid = "";
    string wono = "";
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            CompId = Convert.ToInt32(Session["compid"]);
            sId = Session["username"].ToString();
            FinYearId = Convert.ToInt32(Session["finyear"]);
            connStr = fun.Connection();
            con = new SqlConnection(connStr); 
            CDate = fun.getCurrDate();
            CTime = fun.getCurrTime();
            wono=Request.QueryString["WONo"].ToString();

            string sql = fun.select("CustomerId", "SD_Cust_WorkOrder_Master", "CompId='" + CompId + "'  And WONo='" + wono + "'");
            SqlCommand cmd = new SqlCommand(sql, con);
            SqlDataAdapter DA = new SqlDataAdapter(cmd);
            DataSet DS = new DataSet();
            DA.Fill(DS);
            custid = DS.Tables[0].Rows[0]["CustomerId"].ToString();

            if (!IsPostBack)
            {
                              
                DrpCategory.Items.Clear();
                DrpCategory.Items.Insert(0, "Select");
                DropDownList3.Visible = false;
                DrpCategory.Visible = false;
                DrpSearchCode.Visible = false;
                txtSearchItemCode.Visible = false;
            }

            myframe.Attributes.Add("Src", "CustomerChallan_Clear.aspx?WONO=" + wono + "&ModId=9&SubModId=");

        }



       catch (Exception ex)
        {
        }
    }

    public void Fillgrid(string sd, string B, string s, string drptype)
    {

        DataTable dt = new DataTable();

        try
        {

            string x = "";
            string p = "";
            string q = "";
            string y = "";
            if (DrpType.SelectedValue != "Select")
            {
                if (DrpType.SelectedValue == "Category")
                {
                    if (sd != "Select")
                    {

                        x = " AND tblDG_Item_Master.CId='" + sd + "'";

                        if (B != "Select")
                        {
                            if (B == "tblDG_Item_Master.ItemCode")
                            {
                                txtSearchItemCode.Visible = true;
                                p = " And tblDG_Item_Master.ItemCode Like '" + s + "%'";
                            }

                            if (B == "tblDG_Item_Master.ManfDesc")
                            {
                                txtSearchItemCode.Visible = true;
                                p = " And tblDG_Item_Master.ManfDesc Like '%" + s + "%'";
                            }


                            if (B == "tblDG_Item_Master.Location")
                            {
                                txtSearchItemCode.Visible = false;
                                DropDownList3.Visible = true;

                                if (DropDownList3.SelectedValue != "Select")
                                {
                                    p = " And tblDG_Item_Master.Location='" + DropDownList3.SelectedValue + "'";
                                }
                            }


                        }
                        q = "And tblDG_Item_Master.CompId='" + CompId + "' And tblDG_Item_Master.FinYearId<='" + FinYearId + "'";

                    }
                    else if (sd == "Select" && B == "Select" && s != string.Empty)
                    {
                        y = " And tblDG_Item_Master.ManfDesc Like '%" + s + "%'";

                    }



                }

                else if (DrpType.SelectedValue != "Select" && DrpType.SelectedValue == "WOItems")
                {

                    if (B != "Select")
                    {
                        if (B == "tblDG_Item_Master.ItemCode")
                        {
                            txtSearchItemCode.Visible = true;
                            p = " And tblDG_Item_Master.ItemCode Like '%" + s + "%'";
                        }

                        if (B == "tblDG_Item_Master.ManfDesc")
                        {
                            txtSearchItemCode.Visible = true;
                            p = " And tblDG_Item_Master.ManfDesc Like '%" + s + "%'";
                        }
                    }
                    else if (B == "Select" && s != string.Empty)
                    {
                        y = " And tblDG_Item_Master.ManfDesc Like '%" + s + "%'";

                    }


                }

                SqlCommand cmd = new SqlCommand();
                SqlDataAdapter da = new SqlDataAdapter("GetAllItem", con);
                da.SelectCommand.CommandType = CommandType.StoredProcedure;
                da.SelectCommand.Parameters.Add(new SqlParameter("@startIndex", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@startIndex"].Value = sd;
                da.SelectCommand.Parameters.Add(new SqlParameter("@pageSize", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@pageSize"].Value = x;
                da.SelectCommand.Parameters.Add(new SqlParameter("@startIndex1", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@startIndex1"].Value = p;
                da.SelectCommand.Parameters.Add(new SqlParameter("@pageSize1", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@pageSize1"].Value = q;
                da.SelectCommand.Parameters.Add(new SqlParameter("@drpType", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@drpType"].Value = drptype;
                da.SelectCommand.Parameters.Add(new SqlParameter("@drpCode", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@drpCode"].Value = B;
                da.SelectCommand.Parameters.Add(new SqlParameter("@y", SqlDbType.VarChar));
                da.SelectCommand.Parameters["@y"].Value = y;

                DataSet DSitem = new DataSet();
                da.Fill(DSitem);
                GridView2.DataSource = DSitem;
                GridView2.DataBind();
                this.GetValidate();
            }
            else
            {
                string myStringVariable = string.Empty;
                myStringVariable = "Please Select Category or WO Items.";
                ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + myStringVariable + "');", true);
            }

        }
        catch (Exception ex)
        {

        }

    }




    protected void btnSearch_Click(object sender, EventArgs e)
    {
        try
        {
            string sd = DrpCategory.SelectedValue;
            string c = DrpSearchCode.SelectedValue;
            string d = txtSearchItemCode.Text;
            string e1 = DrpType.SelectedValue;
            this.Fillgrid(sd, c, d, e1);
        }
         catch (Exception ch) { }

    }
    protected void GridView2_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        try
        {
            GridView2.PageIndex = e.NewPageIndex;
            string sd = DrpCategory.SelectedValue;
            string c = DrpSearchCode.SelectedValue;
            string d = txtSearchItemCode.Text;
            string e1 = DrpType.SelectedValue;
            this.Fillgrid(sd, c, d, e1);

        }
        catch (Exception ch)
        {
        }
    }
    protected void DrpSearchCode_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (DrpSearchCode.SelectedItem.Text == "Location")
        {
            DropDownList3.Visible = true;
            txtSearchItemCode.Visible = false;
            txtSearchItemCode.Text = "";
        }
        else
        {
            DropDownList3.Visible = false;
            txtSearchItemCode.Visible = true;
            txtSearchItemCode.Text = "";
        }
    }


    protected void DrpCategory_SelectedIndexChanged(object sender, EventArgs e)
    {
         try
        {
            if (DrpCategory.SelectedValue != "Select")
            {
                DrpSearchCode.Visible = true;
                txtSearchItemCode.Text = "";
            }
        }
       catch (Exception ex) { }
    }


    protected void DrpType_SelectedIndexChanged(object sender, EventArgs e)
    {
         try
        {
            switch (DrpType.SelectedValue)
            {
                case "Category":
                    {
                        DrpSearchCode.Visible = true;
                        DropDownList3.Visible = true;
                        txtSearchItemCode.Visible = true;
                        txtSearchItemCode.Text = "";
                        DrpCategory.Visible = true;

                        string connStr = fun.Connection();
                        SqlConnection con = new SqlConnection(connStr);

                        DataSet DS = new DataSet();
                        string StrCat = fun.select("CId,'['+Symbol+'] - '+CName as Category", "tblDG_Category_Master", "CompId='" + CompId + "'");
                        SqlCommand Cmd = new SqlCommand(StrCat, con);
                        SqlDataAdapter DA = new SqlDataAdapter(Cmd);
                        DA.Fill(DS, "tblDG_Category_Master");
                        DrpCategory.DataSource = DS.Tables["tblDG_Category_Master"];
                        DrpCategory.DataTextField = "Category";
                        DrpCategory.DataValueField = "CId";
                        DrpCategory.DataBind();
                        DrpCategory.Items.Insert(0, "Select");
                        DrpCategory.ClearSelection();

                       
                        fun.drpLocat(DropDownList3);
                        if (DrpSearchCode.SelectedItem.Text == "Location")
                        {
                            DropDownList3.Visible = true;
                            txtSearchItemCode.Visible = false;
                            txtSearchItemCode.Text = "";
                        }
                        else
                        {
                            DropDownList3.Visible = false;
                            txtSearchItemCode.Visible = true;
                            txtSearchItemCode.Text = "";
                        }

                    }
                    break;

                case "WOItems":
                    {
                        txtSearchItemCode.Visible = true;
                        txtSearchItemCode.Text = "";


                        DrpSearchCode.Visible = true;
                        DrpCategory.Visible = false;
                        DrpCategory.Items.Clear();
                        DrpCategory.Items.Insert(0, "Select");

                        DropDownList3.Visible = false;
                        DropDownList3.Items.Clear();
                        DropDownList3.Items.Insert(0, "Select");
                    }
                    break;

                case "Select":
                    {

                        Page.Response.Redirect(Page.Request.Url.ToString(), true);

                    }
                    break;
            }
        }
        catch (Exception ex) { }
    }

    protected void GridView2_RowCommand(object sender, GridViewCommandEventArgs e)
    {

    }
    protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        this.GetValidate();
    }

    protected void BtnAdd_Click(object sender, EventArgs e)
    {
       try
        {

            int y = 0;
            int x = 0;
            int k = 0;

            foreach (GridViewRow grv in GridView2.Rows)
            {
                if (((CheckBox)grv.FindControl("CheckBox1")).Checked == true)
                {
                    x++;
                    if (((CheckBox)grv.FindControl("CheckBox1")).Checked == true && ((TextBox)grv.FindControl("TxtQty")).Text != "" && fun.NumberValidationQty(((TextBox)grv.FindControl("TxtQty")).Text) == true && Convert.ToDouble(((TextBox)grv.FindControl("TxtQty")).Text) != 0)
                    {

                        double Qty = Convert.ToDouble(decimal.Parse(((TextBox)grv.FindControl("TxtQty")).Text).ToString("N3"));
                       
                       
                        {
                            y++;
                        }


                    }
                }

            }

            if (x == y && y > 0)
            {


                DataSet DS = new DataSet();
               

                string cmdStr = fun.select("CCNo", "tblInv_Customer_Challan_Master", "CompId='" + CompId + "' AND FinYearId='" + FinYearId + "' order by Id desc");
                SqlCommand cmd1 = new SqlCommand(cmdStr, con);
                SqlDataAdapter da = new SqlDataAdapter(cmd1);
                da.Fill(DS, "tblInv_Supplier_Challan_Master");
                string CCNo;
                if (DS.Tables[0].Rows.Count > 0)
                {
                    int scno = Convert.ToInt32(DS.Tables[0].Rows[0][0].ToString()) + 1;
                    CCNo = scno.ToString("D4");
                }
                else
                {
                    CCNo = "0001";
                }
                int EmpSupId = fun.chkEmpCustSupplierCode(custid, 2, CompId);

                if (EmpSupId == 1)
                {
                    string StrSCMaster = fun.insert("tblInv_Customer_Challan_Master", "SysDate,SysTime,SessionId,CompId,FinYearId,CCNo,CustomerId,WONo", "'" + CDate + "','" + CTime + "','" + sId + "','" + CompId + "','" + FinYearId + "','" + CCNo + "','" + custid + "','"+wono+"'");
                    SqlCommand cmd11 = new SqlCommand(StrSCMaster, con);
                    con.Open();
                    cmd11.ExecuteNonQuery();
                    con.Close();

                    string sqlMId = fun.select("Id", "tblInv_Customer_Challan_Master", "CompId='" + CompId + "'  Order By Id Desc");
                    SqlCommand cmdMId = new SqlCommand(sqlMId, con);
                    SqlDataAdapter DAMId = new SqlDataAdapter(cmdMId);
                    DataSet DSMId = new DataSet();
                    DAMId.Fill(DSMId);
                    int MId = Convert.ToInt32(DSMId.Tables[0].Rows[0]["Id"].ToString());

                    foreach (GridViewRow grv in GridView2.Rows)
                    {
                        if (((CheckBox)grv.FindControl("CheckBox1")).Checked == true && ((TextBox)grv.FindControl("TxtQty")).Text != "" && fun.NumberValidationQty(((TextBox)grv.FindControl("TxtQty")).Text) == true && Convert.ToDouble(((TextBox)grv.FindControl("TxtQty")).Text) != 0)
                        {
                            int ItemId = Convert.ToInt32(((Label)grv.FindControl("lblId")).Text);
                            double Qty = Convert.ToDouble(decimal.Parse(((TextBox)grv.FindControl("TxtQty")).Text).ToString("N3"));


                            SqlCommand exeme2 = new SqlCommand(fun.insert("tblInv_Customer_Challan_Details", "MId,ChallanQty,ItemId", "" + MId + ",'" + Qty + "','" + ItemId + "'"), con);
                            con.Open();
                            exeme2.ExecuteNonQuery();
                            con.Close();
                            k++;

                        }
                    }
                }
            }

            else
            {
                string myStringVariable = string.Empty;
                myStringVariable = "Invalid input data.";
                ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + myStringVariable + "');", true);

            }

            if (k > 0)
            {
                string sd = DrpCategory.SelectedValue;
                string c = DrpSearchCode.SelectedValue;
                string d = txtSearchItemCode.Text;
                string e1 = DrpType.SelectedValue;
                this.Fillgrid(sd, c, d, e1);
            }

        }
       catch (Exception ex) { }
    }
    public void GetValidate()
    {
        try
        {
            foreach (GridViewRow grv in GridView2.Rows)
            {
                if (((CheckBox)grv.FindControl("CheckBox1")).Checked == true)
                {
                    ((RequiredFieldValidator)grv.FindControl("ReqChNo")).Visible = true;
                    ((TextBox)grv.FindControl("TxtQty")).Enabled = true;

                }
                else
                {
                    ((RequiredFieldValidator)grv.FindControl("ReqChNo")).Visible = false;
                    ((TextBox)grv.FindControl("TxtQty")).Enabled = false;
                }
            }
        }

       catch (Exception ex) { }

    }

    protected void Btncancel_Click(object sender, EventArgs e)
    {
        Response.Redirect("CustomerChallan_New.aspx?ModId=9&SubModId=121");
    }

   
    protected void TabContainer1_ActiveTabChanged(object sender, EventArgs e)
    {

    }
   
    protected void Btncancel1_Click(object sender, EventArgs e)
    {
        Response.Redirect("CustomerChallan_New.aspx?ModId=9&SubModId=121");

    }
}
