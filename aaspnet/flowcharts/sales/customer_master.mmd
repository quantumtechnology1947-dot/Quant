graph TB
    %% Customer Master Module Architecture Diagram
    
    subgraph "Presentation Layer"
        A[CustomerMaster_New.aspx<br/>Customer Registration Form]
        A1[Master Page<br/>MasterPage.master]
        A2[CSS Stylesheets<br/>StyleSheet.css]
        A3[JavaScript Files<br/>PopUpMsg.js<br/>loadingNotifier.js]
    end
    
    subgraph "Code-Behind Layer"
        B[CustomerMaster_New.aspx.cs<br/>Module_SD_Cust_masters_CustomerMaster_New]
        B1[Page_Load Event]
        B2[Submit_Click Event]
        B3[Country SelectedIndexChanged Events]
        B4[State SelectedIndexChanged Events]
        B5[City SelectedIndexChanged Events]
        B6[Dropdown Population Methods]
    end
    
    subgraph "Customer Address Structure"
        C[Three Address Types]
        C1[Registered Office<br/>Primary business address]
        C2[Works/Factory<br/>Manufacturing location]
        C3[Material Delivery<br/>Delivery address]
    end
    
    subgraph "Address Components"
        D[Address Fields per Type]
        D1[Address Text<br/>Multi-line address]
        D2[Country Dropdown<br/>Cascading selection]
        D3[State Dropdown<br/>Based on country]
        D4[City Dropdown<br/>Based on state]
        D5[PIN Code<br/>Postal code]
        D6[Contact Number<br/>Phone number]
        D7[Fax Number<br/>Fax number]
    end
    
    subgraph "Business Information"
        E[Company Details]
        E1[Customer Name<br/>Company name]
        E2[Contact Person<br/>Primary contact]
        E3[Email Address<br/>Business email]
        E4[Contact Number<br/>Primary phone]
        E5[Jurisdiction Code<br/>Legal jurisdiction]
        E6[ECC Number<br/>Excise control code]
        E7[Range<br/>Excise range]
        E8[Commissionerate<br/>Excise commissionerate]
        E9[Division<br/>Business division]
        E10[PAN Number<br/>Tax identification]
        E11[TIN/VAT Number<br/>Tax registration]
        E12[TIN/CST Number<br/>Central sales tax]
        E13[TDS Code<br/>Tax deduction code]
        E14[Remarks<br/>Additional notes]
    end
    
    subgraph "Data Access Layer"
        F[Manual SQL Operations]
        F1[INSERT Command<br/>SD_Cust_master table]
        F2[Country Lookup<br/>tblCountry queries]
        F3[State Lookup<br/>tblState queries]
        F4[City Lookup<br/>tblCity queries]
        F5[Customer ID Generation<br/>Auto-generated unique ID]
    end
    
    subgraph "Database Layer"
        G[(SD_Cust_Master Table)]
        G1[SalesId - Primary Key]
        G2[CustomerId - Unique Code]
        G3[CustomerName - Company Name]
        G4[RegdAddress, RegdCountry, RegdState, RegdCity]
        G5[WorkAddress, WorkCountry, WorkState, WorkCity]
        G6[MaterialDelAddress, MaterialDelCountry, MaterialDelState, MaterialDelCity]
        G7[Contact Information Fields]
        G8[Tax and Legal Fields]
        G9[System Fields - CompId, FinYearId, SessionId]
    end
    
    subgraph "Validation Layer"
        H[Comprehensive Validation]
        H1[Required Field Validators<br/>All address fields]
        H2[Email Format Validation<br/>Regular expression]
        H3[Dropdown Selection Validation<br/>Initial value checks]
        H4[Business Logic Validation<br/>Unique customer checks]
    end
    
    subgraph "Cascading Dropdowns"
        I[Geographic Hierarchy]
        I1[Country Selection<br/>Loads states]
        I2[State Selection<br/>Loads cities]
        I3[Three Independent Cascades<br/>For each address type]
        I4[AutoPostBack Events<br/>Dynamic loading]
    end
    
    subgraph "Business Logic"
        J[Customer Management]
        J1[Customer Registration<br/>New customer creation]
        J2[Address Management<br/>Multiple address handling]
        J3[Tax Information<br/>Compliance data]
        J4[Contact Management<br/>Communication details]
        J5[Integration Preparation<br/>For enquiry/quotation]
    end
    
    subgraph "Related Operations"
        K[Customer Lifecycle]
        K1[Customer Master - Edit<br/>Modification operations]
        K2[Customer Master - Delete<br/>Removal operations]
        K3[Customer Master - Print<br/>Report generation]
        K4[Customer Enquiry<br/>Link to enquiry process]
        K5[Quotation Process<br/>Customer selection]
    end
    
    %% Relationships
    A --> A1
    A --> A2
    A --> A3
    A --> B
    A --> C
    A --> D
    A --> E
    A --> H
    
    B --> B1
    B --> B2
    B --> B3
    B --> B4
    B --> B5
    B --> B6
    
    C --> C1
    C --> C2
    C --> C3
    
    D --> D1
    D --> D2
    D --> D3
    D --> D4
    D --> D5
    D --> D6
    D --> D7
    
    E --> E1
    E --> E2
    E --> E3
    E --> E4
    E --> E5
    E --> E6
    E --> E7
    E --> E8
    E --> E9
    E --> E10
    E --> E11
    E --> E12
    E --> E13
    E --> E14
    
    F --> F1
    F --> F2
    F --> F3
    F --> F4
    F --> F5
    
    G --> G1
    G --> G2
    G --> G3
    G --> G4
    G --> G5
    G --> G6
    G --> G7
    G --> G8
    G --> G9
    
    H --> H1
    H --> H2
    H --> H3
    H --> H4
    
    I --> I1
    I --> I2
    I --> I3
    I --> I4
    
    J --> J1
    J --> J2
    J --> J3
    J --> J4
    J --> J5
    
    K --> K1
    K --> K2
    K --> K3
    K --> K4
    K --> K5
    
    C1 --> D
    C2 --> D
    C3 --> D
    
    D2 --> I1
    D3 --> I2
    D4 --> I2
    
    B3 --> I1
    B4 --> I2
    B5 --> I2
    
    B2 --> F1
    F1 --> G
    
    J1 --> G
    J2 --> C
    J3 --> E
    J4 --> E
    J5 --> K4
    J5 --> K5
    
    %% Styling
    classDef presentationClass fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef codeClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef addressClass fill:#e8eaf6,stroke:#3f51b5,stroke-width:2px
    classDef componentClass fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef businessClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef dataClass fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef dbClass fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    classDef validationClass fill:#e0f2f1,stroke:#004d40,stroke-width:2px
    classDef cascadingClass fill:#f9fbe7,stroke:#827717,stroke-width:2px
    classDef logicClass fill:#fff8e1,stroke:#ff6f00,stroke-width:2px
    classDef relatedClass fill:#fafafa,stroke:#424242,stroke-width:2px
    
    class A,A1,A2,A3 presentationClass
    class B,B1,B2,B3,B4,B5,B6 codeClass
    class C,C1,C2,C3 addressClass
    class D,D1,D2,D3,D4,D5,D6,D7 componentClass
    class E,E1,E2,E3,E4,E5,E6,E7,E8,E9,E10,E11,E12,E13,E14 businessClass
    class F,F1,F2,F3,F4,F5 dataClass
    class G,G1,G2,G3,G4,G5,G6,G7,G8,G9 dbClass
    class H,H1,H2,H3,H4 validationClass
    class I,I1,I2,I3,I4 cascadingClass
    class J,J1,J2,J3,J4,J5 logicClass
    class K,K1,K2,K3,K4,K5 relatedClass
