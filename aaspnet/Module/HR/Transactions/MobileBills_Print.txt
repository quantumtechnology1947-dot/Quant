=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/HR/Transactions/MobileBills_Print.aspx.txt ===

﻿<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="MobileBills_Print.aspx.cs" Inherits="Module_HR_Transactions_MobileBills_Print" Title="ERP"  Theme="Default" %>

<%@ Register assembly="CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" namespace="CrystalDecisions.Web" tagprefix="CR" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <link href="../../../Css/StyleSheet.css" rel="stylesheet" type="text/css" />

    <script src="../../../Javascript/loadingNotifier.js" type="text/javascript"></script>
  
    <link href="../../../Css/yui-datatable.css" rel="stylesheet" type="text/css" /> 

    <script src="../../../Javascript/PopUpMsg.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cp3" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="cp1" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="cp2" Runat="Server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="MainContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
</asp:Content>
<asp:Content ID="Content7" ContentPlaceHolderID="ContentPlaceHolder3" Runat="Server">

    <table width="100%" >
              
         <tr>
           
            <td align="left" valign="middle" colspan="3"  style="background:url(../../../images/hdbg.JPG)" height="21" class="fontcsswhite"><b>&nbsp;Mobile Bill - Print</b></td>
           
        </tr>
        <tr>
            <td align="left" colspan="3">
                <b>Month Of Bill&nbsp; </b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
                    onselectedindexchanged="DropDownList1_SelectedIndexChanged" 
                    CssClass="box3" Width="100px">
                  
                </asp:DropDownList>  
            </td>
           
        </tr>
         
         <tr>
         <td  align="center">
         
         <iframe   src="" id="myframe"  runat="server"  width="100%" height="415" frameborder="0" >        
        </iframe> 
         </td>
         </tr>
 <%--   <tr>
        <td align="center">
            <asp:Panel ID="Panel1" runat="server" ScrollBars="Both" Height="430" Width="100%">           
    <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
        AutoDataBind="True" Height="50px" ReportSourceID="CrystalReportSource2" 
        Width="350px" DisplayGroupTree="False" EnableDatabaseLogonPrompt="False" 
        EnableParameterPrompt="False" />
    <CR:CrystalReportSource ID="CrystalReportSource2" runat="server">
        <Report FileName="~\Module\HR\Transactions\Reports\MobileBill.rpt"></Report>
    </CR:CrystalReportSource>
 </asp:Panel>
        </td>       
    </tr>--%>
    <tr>
     <td  align="center" valign="middle" height="25">
          </td>
    </tr>

       
        </table>

</asp:Content>
<asp:Content ID="Content8" ContentPlaceHolderID="ContentPlaceHolder4" Runat="Server">
</asp:Content>



=== FILE: /Users/shiv/workspace/syncortext/NewERP/Module/HR/Transactions/MobileBills_Print.aspx.cs ===

﻿using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.SqlClient;
using System.Collections.Generic;
using CrystalDecisions.CrystalReports.Engine;

public partial class Module_HR_Transactions_MobileBills_Print : System.Web.UI.Page
{
    clsFunctions fun = new clsFunctions();
    private ReportDocument report = new ReportDocument(); 

    protected void Page_Load(object sender, EventArgs e)
    {


        if (!IsPostBack)
        {
            string connStr = fun.Connection();
            SqlConnection con = new SqlConnection(connStr);
            try
            {
                DataSet DS = new DataSet();
                int CompId = Convert.ToInt32(Session["compid"]);
                int FinYearId = Convert.ToInt32(Session["finyear"]);                

                fun.GetMonth(DropDownList1, CompId, FinYearId);
                
            }
           catch (Exception ex)
            { }         
          
        }       

    }




    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {      
        if (DropDownList1.SelectedItem.Text != "Select")
        {
            string getRandomKey = fun.GetRandomAlphaNumeric();



            myframe.Attributes.Add("Src", "MobilePrint.aspx?months=" + DropDownList1.SelectedValue + "&Key=" + getRandomKey + "&ModId=12&SubModId=50");
        }
    }



    
}
